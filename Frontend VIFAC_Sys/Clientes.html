<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-compatible" content="IE-edge"> <!-- Compatibilidad con navegadores -->
  <meta name="viewport" content="width=device-width, initial-scale=1" /> <!-- Responsive -->
  <title>Clientes</title>
  <!-- Bootstrap CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet" />
  <!-- Íconos de Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet"/>
  <!-- Estilos personalizados -->
  <link rel="stylesheet" href="css/clientes.css" />
</head>
<body>
  <!-- HEADER -->
  <header class="bg-light py-3">
    <div class="container">
      <!-- Ícono y título principal -->
      <div class="row align-items-center mb-2">
        <div class="col-12 d-flex align-items-center justify-content-start flex-wrap gap-2">
          <i class="bi bi-person-lines-fill"></i>
          <h4 class="mb-0">Clientes</h4>
        </div>
      </div>

      <!-- Nombre empresa + Barra de búsqueda -->
      <div class="row align-items-center">
        <!-- Nombre empresa -->
        <div class="col-12 col-md-6 mb-2 mb-md-0">
          <div class="nombre-empresa">
            <div class="titulo">MAXI-LIMPIEZA</div>
            <div class="subtitulo">Calidad que se siente</div>
          </div>
        </div>

        <!-- Barra de búsqueda -->
        <div class="col-12 col-md-6 d-flex justify-content-start justify-content-md-end">
          <form class="input-group w-100 w-md-auto" onsubmit="buscarCliente(event)">
            <input type="text" id="busquedaCliente" class="form-control" placeholder="Buscar por nombre o cedula"/>
            <button type="button" class="btn btn-outline-secondary" onclick="buscarCliente()">Buscar</button>
          </form>
        </div>
      </div>
    </div>
  </header>
  <hr />

  <!-- MAIN -->
  <main class="container my-4">
    <!-- Encabezado de tabla + botón agregar -->
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h4>Lista Clientes</h4>
      <button class="btn btn-outline-primary" onclick="abrirModalCliente()">
        + Agregar Cliente
      </button>
    </div>

    <!-- Tabla de clientes -->
    <div class="table-responsive justify-content">
      <table class="table table-bordered table-striped">
        <thead class="table-info">
          <tr>
            <th>ITEM</th>
            <th>NOMBRES Y APELLIDOS</th>
            <th>DOCUMENTO</th>
            <th>TELEFONO</th>
            <th>CORREO ELECTRONICO</th>
            <th>ESTADO</th>
            <th>ACCIONES</th>
          </tr>
        </thead>
        <!-- Aquí se cargan dinámicamente los clientes -->
        <tbody id="tablaClientes" class="table-group-divider"></tbody>
      </table>
    </div>
  </main>

  <!-- Botones de navegación -->
  <div class="container mb-1 d-flex justify-content-start gap-1">
    <button class="btn btn-outline-secondary" onclick="location.href='index.html'">Inicio</button>
    <button class="btn btn-outline-success justify-content-start" onclick="location.href='vender.html'">Continuar Venta</button>
    <button class="btn btn-outline-danger ms-auto" onclick="location.href='login.html'">Cerrar sesión</button>
  </div>

  <!-- FOOTER -->
  <footer>
    <div class="container d-flex justify-content-between flex-wrap">
      <small>© 2025</small>
      <small>Política de privacidad · Diseñado por O.T.G “VIFAC-Sys”</small>
    </div>
  </footer>

  <!-- MODAL Cliente -->
  <div class="modal fade" id="modalClientes" tabindex="-1" aria-labelledby="modalClienteLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <!-- Encabezado modal -->
        <div class="modal-header">
          <h5 class="modal-title" id="modalClienteLabel">Agregar / Editar Cliente</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>

        <!-- Cuerpo del modal -->
        <div class="modal-body">
          <form id="formCliente" novalidate>
            <div class="row mb-3">
              <div class="col-md-6">
                <label for="nombre" class="form-label">Nombres y Apellidos</label>
                <input type="text" id="nombre" class="form-control" required placeholder="Ingrese nombres y apellidos"/>
              </div>
            </div>
            <div class="row mb-3">
              <!-- Documento -->
              <div class="col-md-4">
                <label for="documento" class="form-label">Documento</label>
                <input type="text" id="documento" class="form-control" oninput="this.value=this.value.replace(/[^0-9]/g,'')" required placeholder="Ingrese cédula o documento" maxlength="10"/>
                <div class="invalid-feedback" id="documentoFeedback"></div>
              </div>
              <!-- Teléfono -->
              <div class="col-md-4">
                <label for="telefono" class="form-label">Teléfono</label>
                <input type="text" id="telefono" class="form-control" oninput="this.value=this.value.replace(/[^0-9]/g,'')" required placeholder="Ingrese teléfono (10 dígitos)" maxlength="10"/>
                <div class="invalid-feedback" id="telefonoFeedback"></div>
              </div>
              <!-- Correo -->
              <div class="col-md-4">
                <label for="correoElectronico" class="form-label">Correo Electrónico</label>
                <input type="email" id="correoElectronico" class="form-control" required placeholder="ejemplo@correo.com" oninput="validarCorreo(this)"/>
                <div class="invalid-feedback">
                  Por favor ingrese un correo válido (ejemplo: usuario@dominio.com)
                </div>
              </div>
            </div>
            <!-- Estado -->
            <div class="mb-3">
              <label for="estado" class="form-label">Estado</label>
              <div class="dropdown w-100">
                <button class="btn btn-outline-secondary dropdown-toggle w-100 text-start" type="button" id="dropdownEstado" data-bs-toggle="dropdown" aria-expanded="false">
                  Seleccionar
                </button>
                <ul class="dropdown-menu w-100" aria-labelledby="dropdownEstado">
                  <li><a class="dropdown-item" href="#" data-value="Activo">Activo</a></li>
                  <li><a class="dropdown-item" href="#" data-value="Inactivo">Inactivo</a></li>
                </ul>
              </div>
              <input type="hidden" id="estado" name="estado">
            </div>

            <!-- Campo oculto para editar -->
            <input type="hidden" id="clienteId" />
          </form>
        </div>

        <!-- Pie del modal -->
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-outline-primary" onclick="guardarCliente()">Guardar</button>
        </div>
      </div>
    </div>
  </div>

   <!-- Scripts de Bootstrap y archivo JS propio -->
  <script src="js/bootstrap.bundle.min.js"></script>
  <script src="js/clientes.js"></script>
</body>
</html>
